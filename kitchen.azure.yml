---
driver:
  name: azurerm

driver_config:
  subscription_id: e6b872d2-4d5a-42aa-9ac9-8f5e03f556dc
  location: Central US
  machine_size: Standard_D2s_v3
  azure_resource_group_name: davin.taddeo

transport:
  name: winrm

provisioner:
  name: chef_zero
  always_update_cookbooks: true
  client_rb:
    data_collector.server_url: 'https://dt-automate.centralus.cloudapp.azure.com/data-collector/v0/'
    data_collector.token: 'Sn_P3TZ2Njw4XS8vsKKI0OGZT3U='
    chef_license: accept
  require_chef_omnibus: true

verifier:
  name: inspec

platforms:
  - name: windows2019
    driver:
      image_urn: MicrosoftWindowsServer:WindowsServer:2019-Datacenter-smalldisk:latest
      use_ephemeral_osdisk: true
      resource_group_tags:
        project: 'DTaddeo-Testing'
        contact: 'davin@chef.io'
    transport:
      name: winrm
  - name: windows2016
    driver:
      image_urn: MicrosoftWindowsServer:WindowsServer:2016-Datacenter-smalldisk:latest
      <% rightnow = Time.now.to_i %>
      vm_name: w16-<%= rightnow.to_s %>
      use_ephemeral_osdisk: true
      resource_group_tags:
        project: 'DTaddeo-Testing'
        contact: 'davin@chef.io'
    transport:
      name: winrm

suites:
  - name: default
    verifier:
      inspec_tests:
        - /Users/davin/Documents/customers/content_services/cis-iis-10-benchmark
    attributes:
